<app-menu-lateral></app-menu-lateral>

<main class="main-content">
  <div class="card-adduser">
      <h4><i class="fas fa-user-plus"></i> Adicionar Novo Usuário</h4>


      <form #userForm="ngForm" (ngSubmit)="addUser(userForm)" novalidate> <div class="form-row">
              <div class="form-group">
                  <label for="newUserEmail">E-mail do Usuário</label>
                  <input type="email" id="newUserEmail" name="email" [(ngModel)]="newUser.email" placeholder="nome&#64;empresa.com.br" required email 
                         #emailInput="ngModel" [class.ng-invalid]="emailInput.invalid && (emailInput.dirty || emailInput.touched)">
                  
                  <div *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)" class="validation-message">
                      <div *ngIf="emailInput.errors?.['required']">
                          O e-mail é obrigatório.
                      </div>
                      <div *ngIf="emailInput.errors?.['email']">
                          Por favor, insira um e-mail válido (ex: nome&#64;empresa.com.br).
                      </div>
                  </div>
              </div>
              <div class="form-group">
                  <label for="newUserPassword">Senha </label>
                  <input type="password" id="newUserPassword" name="password" [(ngModel)]="newUser.password" placeholder="Mínimo 8 caracteres" required minlength="8" 
                         #passwordInput="ngModel" [class.ng-invalid]="passwordInput.invalid && (passwordInput.dirty || passwordInput.touched)">
                  
                  <div *ngIf="passwordInput.invalid && (passwordInput.dirty || passwordInput.touched)" class="validation-message">
                      <div *ngIf="passwordInput.errors?.['required']">
                          A senha é obrigatória.
                      </div>
                      <div *ngIf="passwordInput.errors?.['minlength']">
                          A senha deve ter pelo menos 8 caracteres.
                      </div>
                  </div>
              </div>
          </div>

          <div class="form-row">
              <div class="form-group">
                  <label for="accessLevel">Nível de Acesso</label>
                   <select id="accessLevel" name="accessLevel" [(ngModel)]="newUser.accessLevel" required 
                          #levelSelect="ngModel" [class.ng-invalid]="levelSelect.invalid && (levelSelect.dirty || levelSelect.touched)">
                      <option value="" disabled selected>Selecione um nível</option>
                      <option value="admin">Administrador </option> 
                      <option value="funcionario">Funcionário </option> 
                    </select>
                  <div *ngIf="levelSelect.invalid && (levelSelect.dirty || levelSelect.touched)" class="validation-message">
                      O nível de acesso é obrigatório.
                  </div>
              </div>

              <div class="form-group-button">
                  <button type="submit" class="add-user-btn" [disabled]="!userForm.form.valid">
                      <i class="fas fa-check"></i> Criar Usuário
                  </button>
              </div>
          </div>
          
          <div *ngIf="statusMessage" [class.success]="statusMessage.includes('sucesso')" [class.error]="statusMessage.includes('erro')" class="status-message">
              {{ statusMessage }}
          </div>
      </form>
  </div>

  <div class="access-info-card">
    <h4><i class="fas fa-key"></i> Descrição dos Níveis de Acesso</h4>
    <div class="access-table-container">
        <table>
            <thead>
                <tr>
                    <th>Nível de Acesso</th>
                    <th>Permissão de Acesso</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Administrador</td>
                    <td>Acesso "Total" a todas as áreas do sistema (Gestão de Conteúdo, Relatórios, Configurações), exceto Adicionar/Remover outros usuários.</td>
                </tr>
                <tr>
                    <td>Funcionário</td>
                    <td>Acesso a Visualização de dados, Geração de Relatórios e funcionalidades básicas.</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</main>