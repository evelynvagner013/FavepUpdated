<app-menu-central></app-menu-central>
<app-menu-lateral></app-menu-lateral>

<main class="main-content">
  <div class="subscription-section card-perfil">
      <div class="card-header">
          <h2>Plano de Assinatura</h2>
      </div>
      
      <div class="subscription-details">
          <div *ngIf="planoAtual; else loadingTemplate" class="current-plan-card">
              <h3>Seu plano atual é: <span class="plan-name">{{ planoAtual.nome }}</span></h3>
              <p class="plan-price">{{ planoAtual.preco }}</p>
              <p>{{ planoAtual.descricao }}</p>
          </div>
          <ng-template #loadingTemplate>
              <div class="loading-message">Carregando detalhes do plano...</div>
          </ng-template>
      </div>
      
      <div class="plan-comparison-section">
          <h4>Outros Planos Disponíveis</h4>
          <div class="plan-grid">
              
              <div class="plan-card" [class.current-card]="planoAtual?.nome === 'Semanal'">
                  <h5>Semanal</h5>
                  <p class="plan-price">Free</p>
                  <ul>
                      <li><i class="fas fa-check-circle"></i> Acesso completo</li>
                      <li><i class="fas fa-check-circle"></i> Relatórios básicos</li>
                  </ul>
                  <button class="select-plan-btn" [disabled]="planoAtual?.nome === 'Semanal'" (click)="handleSubscription({ tipo: 'Semanal', valor: 0 }, $event)">
                    {{ planoAtual?.nome === 'Semanal' ? 'Plano Atual' : 'Selecionar' }}
                  </button>
              </div>

              <div class="plan-card" [class.current-card]="planoAtual?.nome === 'Mensal'">
                  <h5>Mensal</h5>
                  <p class="plan-price">R$ 500,00/mês</p>
                  <ul>
                      <li><i class="fas fa-check-circle"></i> Todos os recursos do Semanal</li>
                      <li><i class="fas fa-check-circle"></i> Suporte prioritário</li>
                  </ul>
                  <button class="select-plan-btn" [disabled]="planoAtual?.nome === 'Mensal'" (click)="handleSubscription({ tipo: 'Mensal', valor: 500 }, $event)">
                    {{ planoAtual?.nome === 'Mensal' ? 'Plano Atual' : 'Selecionar' }}
                  </button>
              </div>

              <div class="plan-card" [class.current-card]="planoAtual?.nome === 'Trimestral'">
                  <h5>Trimestral</h5>
                  <p class="plan-price">R$ 1.350,00/trimestre</p>
                  <ul>
                      <li><i class="fas fa-check-circle"></i> Todos os recursos do Mensal</li>
                      <li><i class="fas fa-check-circle"></i> Desconto de 10%</li>
                  </ul>
                   <button class="select-plan-btn" [disabled]="planoAtual?.nome === 'Trimestral'" (click)="handleSubscription({ tipo: 'Trimestral', valor: 1350 }, $event)">
                    {{ planoAtual?.nome === 'Trimestral' ? 'Plano Atual' : 'Selecionar' }}
                  </button>
              </div>

              <div class="plan-card" [class.current-card]="planoAtual?.nome === 'Semestral'">
                  <h5>Semestral</h5>
                  <p class="plan-price">R$ 2.400,00/semestre</p>
                  <ul>
                      <li><i class="fas fa-check-circle"></i> Todos os recursos do Trimestral</li>
                      <li><i class="fas fa-check-circle"></i> Suporte 24/7</li>
                  </ul>
                   <button class="select-plan-btn" [disabled]="planoAtual?.nome === 'Semestral'" (click)="handleSubscription({ tipo: 'Semestral', valor: 2400 }, $event)">
                    {{ planoAtual?.nome === 'Semestral' ? 'Plano Atual' : 'Selecionar' }}
                  </button>
              </div>

              <div class="plan-card" [class.current-card]="planoAtual?.nome === 'Anual'">
                  <h5>Anual</h5>
                  <p class="plan-price">R$ 4.200,00/ano</p>
                  <ul>
                      <li><i class="fas fa-check-circle"></i> Todos os recursos do Semestral</li>
                      <li><i class="fas fa-check-circle"></i> Acesso antecipado a recursos</li>
                  </ul>
                  <button class="select-plan-btn" [disabled]="planoAtual?.nome === 'Anual'" (click)="handleSubscription({ tipo: 'Anual', valor: 4200 }, $event)">
                    {{ planoAtual?.nome === 'Anual' ? 'Plano Atual' : 'Selecionar' }}
                  </button>
              </div>

          </div>
      </div>
  </div>
</main>